@page "/register"
@model Asharea_viewer.Pages.auth.registerModel
@{
    ViewData["Title"] = "Register";
}


<!-- Content -->

<div class="authentication-wrapper authentication-1 px-4">
    <div class="authentication-inner py-5">

     
        <div class="d-flex justify-content-center align-items-center">
            <div class="">
                <div class="w-100 position-relative text-center">
                    <img src="imgs/icons/gbxml.png" class="w-75"/>
                </div>
            </div>
        </div>
        
        <!-- / Logo -->
        <!-- Form -->
        <form onsubmit="return sign_up(event)" class="my-5">
            <div class="form-group">
                <label class="form-label">Your username</label>
                <input type="text" class="form-control" id="username" required="required">
            </div>
            <div class="form-group">
                <label class="form-label">Your email</label>
                <input type="text" class="form-control" id="email" required="required">
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" class="form-control" id="password" required="required">
            </div>
            <button type="submit" class="btn btn-primary btn-block mt-4">Sign Up</button>
            <div class="bg-lightest text-muted small p-2 mt-4">
                By clicking "Sign Up", you agree to our
                <a href="javascript:void(0)">terms of service and privacy policy</a>. We’ll occasionally send you account related emails.
            </div>
        </form>
        <!-- / Form -->

        <div class="text-center text-muted">
            Already have an account? <a href="/login">Sign In</a>
        </div>

    </div>
</div>
<script>
    $(document).ready(function () {
        
    });

    function sign_up(e) {
        e.preventDefault();

        let email = $("#email").val();
        let usermame = $("#username").val();
        let password = $("#password").val();
        $.ajax({
            type: 'POST',
            url: get_root_Api() + 'Register',
            data: {
                email: email,
                username: usermame,
                password: password
            },
            success: function (data) {
                window.location.href = "./register_validate";
            },
            error: function (error) {
                pop_info("Error",error.message);
            }
        });
        return false;  // prevent form submit jump to action link
    };
</script>